{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["C:/Users/napak/embed/project/embeddedproj/src/app/components/icons/MicIcon.tsx"],"sourcesContent":["export const MicIcon = ()=>{\r\n    return (\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" className=\"size-6\">\r\n            <path d=\"M8.25 4.5a3.75 3.75 0 1 1 7.5 0v8.25a3.75 3.75 0 1 1-7.5 0V4.5Z\" />\r\n            <path d=\"M6 10.5a.75.75 0 0 1 .75.75v1.5a5.25 5.25 0 1 0 10.5 0v-1.5a.75.75 0 0 1 1.5 0v1.5a6.751 6.751 0 0 1-6 6.709v2.291h3a.75.75 0 0 1 0 1.5h-7.5a.75.75 0 0 1 0-1.5h3v-2.291a6.751 6.751 0 0 1-6-6.709v-1.5A.75.75 0 0 1 6 10.5Z\" />\r\n        </svg>\r\n    )\r\n}\r\n"],"names":["MicIcon","$","_c","$i","Symbol","for","t0"],"mappings":";;;;;;;;AAAO,gBAAgBA,CAAA;IAAA,MAAAC,CAAA,OAAAC,oNAAA,EAAA;IAAA,IAAAD,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAE,EAAA,GAAA,GAAAA,EAAA,GAAA,GAAAA,EAAA,IAAA,EAAA;YAAAF,CAAA,CAAAE,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAJ,CAAA,CAAA,EAAA,GAAA;IAAA;IAAA,IAAAK,EAAA;IAAA,IAAAL,CAAA,CAAA,EAAA,KAAAG,MAAA,CAAAC,GAAA,CAAA,8BAAA;QAEfC,EAAA,iBAAA,iOAAA,GAGM;YAHK,KAA4B,EAA5B,4BAA4B;YAAS,OAAW,EAAX,WAAW;YAAM,IAAc,EAAd,cAAc;YAAW,SAAQ,EAAR,QAAQ;;8BAC9F,iOAAA,IAA4E;oBAApE,CAAiE,EAAjE,iEAAiE;;;;;;8BACzE,iOAAA,IAAyO;oBAAjO,CAA8N,EAA9N,8NAA8N,GAC1O,EAHA,GAGM;;;;;;;;;;;;QAAAL,CAAA,CAAA,EAAA,GAAAK,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAL,CAAA,CAAA,EAAA;IAAA;IAAA,OAHNK,EAGM;AAAA,CAEb;KAPYN,OAAO","ignoreList":[]}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/napak/embed/project/embeddedproj/src/app/api/sendAudioFile.js"],"sourcesContent":["import dotenv from 'dotenv';\r\ndotenv.config('.config');\r\n\r\nconst { ESP_IP_ADDRESS } = process.env;\r\nexport default async function sendAudioFile(audio){\r\n    console.log(audio)\r\n    console.log (ESP_IP_ADDRESS)\r\n    // res = await ESP_IP_ADDRESS/api/file/upload(audio)\r\n    // return res.status\r\n}"],"names":[],"mappings":";;;;AAG2B;AAH3B;;AACA,mJAAM,CAAC,MAAM,CAAC;AAEd,MAAM,EAAE,cAAc,EAAE,GAAG,+MAAO,CAAC,GAAG;AACvB,eAAe,cAAc,KAAK;IAC7C,QAAQ,GAAG,CAAC;IACZ,QAAQ,GAAG,CAAE;AACb,oDAAoD;AACpD,oBAAoB;AACxB"}},
    {"offset": {"line": 86, "column": 0}, "map": {"version":3,"sources":["C:/Users/napak/embed/project/embeddedproj/src/app/components/Mic.tsx"],"sourcesContent":["'use client'\r\nimport { MicIcon } from \"./icons/MicIcon\";\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport sendAudioFile from \"@/app/api/sendAudioFile\";\r\n\r\nexport const Mic = () => {\r\n    const [canRecord, setCanRecord] = useState(true);\r\n    const [isRecording, setIsRecording] = useState(false);\r\n    const [audioUrl, setAudioUrl] = useState<string | null>(null);\r\n\r\n    const streamRef = useRef<MediaStream | null>(null);\r\n    const recorderRef = useRef<MediaRecorder | null>(null);\r\n    const chunksRef = useRef<Blob[]>([]);\r\n    \r\n    // Request microphone access and prepare MediaRecorder\r\n    useEffect(() => {\r\n        let mounted = true;\r\n        async function init() {\r\n            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\r\n                setCanRecord(false);\r\n                return;\r\n            }\r\n\r\n            try {\r\n                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n                if (!mounted) return;\r\n                streamRef.current = stream;\r\n\r\n                const recorder = new MediaRecorder(stream);\r\n                recorder.ondataavailable = (e: BlobEvent) => {\r\n                    if (e.data && e.data.size > 0) {\r\n                        chunksRef.current.push(e.data);\r\n                    }\r\n                };\r\n\r\n                recorder.onstop = () => {\r\n                    const audioBlob = new Blob(chunksRef.current, { type: \"audio/webm\" });\r\n                    chunksRef.current = [];\r\n                    const url = URL.createObjectURL(audioBlob);\r\n                    setAudioUrl(url);\r\n                    sendAudioFile(audioBlob);\r\n\r\n                };\r\n\r\n                recorderRef.current = recorder;\r\n                \r\n                setCanRecord(true);\r\n            } catch (err) {\r\n                console.error(\"Error accessing microphone:\", err);\r\n                setCanRecord(false);\r\n            }\r\n        }\r\n\r\n        init();\r\n\r\n        return () => {\r\n            mounted = false;\r\n            // cleanup: stop recorder and tracks\r\n            if (recorderRef.current && recorderRef.current.state !== \"inactive\") {\r\n                try {\r\n                    recorderRef.current.stop();\r\n                } catch {}\r\n            }\r\n            if (streamRef.current) {\r\n                streamRef.current.getTracks().forEach((t) => t.stop());\r\n                streamRef.current = null;\r\n            }\r\n            if (audioUrl) {\r\n                URL.revokeObjectURL(audioUrl);\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    const handleClick = () => {\r\n        if (!canRecord) return;\r\n\r\n        const recorder = recorderRef.current;\r\n        if (!recorder) return;\r\n        if (!isRecording) {\r\n            // start recording\r\n            chunksRef.current = [];\r\n            try {\r\n                recorder.start();\r\n                setIsRecording(true);\r\n            } catch (err) {\r\n                console.error(\"Failed to start recorder\", err);\r\n            }\r\n        } else {\r\n            // stop recording\r\n            try {\r\n                recorder.stop();\r\n            } catch (err) {\r\n                console.error(\"Failed to stop recorder\", err);\r\n            }\r\n            setIsRecording(false);\r\n            \r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-col items-center justify-center gap-1\">\r\n            <button\r\n                className={`bg-primary-200 h-[70px] w-[70px] relative text-primary-800 py-2 px-2 rounded-full shadow-lg hover:shadow-xl transition duration-300 ease-in-out flex items-center justify-center\r\n                        ${isRecording ? \"animate-bounce\" : \"\"}`}\r\n                onClick={handleClick}\r\n            >\r\n                <div className=\"flex items-center absolute justify-center\">\r\n                    <MicIcon />\r\n                </div>\r\n            </button>\r\n\r\n            {isRecording ? (\r\n                <div className=\"text-sm text-primary-200\">Listening...</div>\r\n            ) : (\r\n                <div className=\"text-sm text-primary-200\">Tap to speak</div>\r\n            )}\r\n\r\n            {audioUrl && (\r\n                <audio className=\"mt-2\" controls src={audioUrl} />\r\n            )}\r\n        </div>\r\n    );\r\n};"],"names":["c","_c","MicIcon","useState","useEffect","useRef","sendAudioFile","Mic","$","$i","Symbol","for","canRecord","setCanRecord","isRecording","setIsRecording","audioUrl","setAudioUrl","streamRef","recorderRef","t0","chunksRef","t1","mounted","init","navigator","mediaDevices","getUserMedia","stream","audio","current","recorder","MediaRecorder","ondataavailable","e","data","size","push","onstop","audioBlob","Blob","type","url","URL","createObjectURL","t2","err","console","error","state","stop","getTracks","forEach","_temp","revokeObjectURL","t3","recorder_0","start","t4","t5","handleClick","t6","t7","t8","t9","t"],"mappings":"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","ignoreList":[]}}]
}